<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App</title>
  </head>
  <body>
    <button class="btn" onclick="iniTimeOut()">Click</button>
    <button class="add" onclick="displayMessage()">Add to chart</button>
    <button class="addM" onclick="countM++">Add Message</button>
    <button class="removeM" onclick="countM--">Remove Message</button>
    <button class="js-button">Click</button>
    <p class="added"></p>
  </body>
  <script>
    const jsbutton = document.querySelector('.js-button');

    jsbutton.addEventListener('click', () => {
      console.log('click');
    });

    const eventListener = () => {
      console.log('click2');
    };
    // kelebihan addevenlister adalah bisa menggunakan beberapa kali event
    jsbutton.addEventListener('click', eventListener);

    // remove event
    jsbutton.removeEventListener('click', eventListener);
    // function are value

    const test = function () {
      console.log('hello');
    };

    console.log(test);
    test();

    function run(parameter) {
      parameter();
    }

    run(function () {
      console.log('hai 3');
    });

    setTimeout(function () {
      console.log('timeout');
    }, 3000);

    console.log('no wait');
    // diatas adalah contoh asyancrounos code
    // set time out tidak akan menghalangi console.log dijalankan
    // karena set timeout berjalan dibelakang layar

    setInterval(function () {
      console.log('interval');
    }, 3000);
    // interval sama dengan set timeout tapi dia akan mengulang funsi itu terus menerus

    // 12g
    let countM = 0;
    // function titleChange(value) {
    //   if (value === 'add') {
    //     setInterval(function () {
    //       const changeTitle = document.querySelector('title');
    //       changeTitle.innerHTML = `(${countM++}) New message`;
    //     }, 2000);
    //   } else if (value === 'remove') {
    //     setInterval(function () {
    //       const changeTitle = document.querySelector('title');
    //       changeTitle.innerHTML = `(${countM--}) New message`;
    //     }, 2000);
    //   }

    // }

    setInterval(function () {
      if (countM > 0) {
        if (document.title === 'App') {
          document.title = `(${countM}) New message `;
        }
      } else {
        document.title = 'App';
      }
    });
    [
      // foreach sama seperti for loop
      // foreach ada fitur index dan value
      ('makan', 'mandi', 'tidur'),
    ].forEach((value, index) => {
      if (value === 'mandi') {
        return;
        // return ini sama seperti continue di for loop
      }
      console.log(value, index);
    });

    // 12a
    const add = function () {
      console.log(2 + 3);
    };

    add();
    add();

    // 12b
    function runTwice(fun) {
      fun();
    }
    runTwice(function () {
      add();
      add();
    });

    // 12c
    function iniTimeOut() {
      setTimeout(function () {
        document.querySelector('button').innerHTML = 'berhasil';
      }, 1000);
      // 12d
      document.querySelector('button').innerHTML = 'Loading...';
    }

    // 12e
    // let istrue = false;
    // function removeText() {
    //   if (!istrue) {
    //     setTimeout(function () {
    //       document.querySelector('.added').innerHTML = '';
    //     }, 2000);
    //     document.querySelector('.added').innerHTML = 'Added';
    //   } else {
    //     clearTimeout();
    //     istrue = true;
    //   }
    // }

    let timeoutID;

    function displayMessage() {
      const messageElement = document.querySelector('.added');
      messageElement.innerHTML = 'Added';

      // first, cancel the previous time out
      // so it doesn't remove the message too quickly;

      clearTimeout(timeoutID);

      timeoutID = setTimeout(function () {
        messageElement.innerHTML = '';
      }, 2000);
    }

    // arrow function
    const arrowFunction = () => {
      console.log('this is arrow function');
    };

    arrowFunction();

    // if paramater only one, braket() its optional
    const param1 = (param) => {
      console.log(param + 1);
    };
    param1(5);

    // one line arrow function
    const oneline = () => 2 + 3;
    console.log(oneline());

    console.log(
      [1, -3, 5].filter((value, index) => {
        // if (value >= 0) {
        //   return true;
        // } else {
        //   return false;
        // }
        return value >= 0;
      })
    );

    // map to make new array
    console.log(
      [5, 5, 5].map((value, index) => {
        return value * 10;
      })
    );

    // 12j
    const multiply = (val1, val2) => {
      console.log(val1 * val2);
    };

    multiply(20, 10);

    const positive = (array) => {
      array.forEach((value, index) => {
        if (value < 0) {
          return;
        } else {
          console.log(value, index);
        }
      });
    };

    positive([1, -4, 5, 6]);

    console.log(
      [1, -3, 4].filter((value, index) => {
        return value >= 0;
      })
    );

    const addNum = (array, num) => {
      array.map((value, index) => {
        console.log(value * num);
      });
    };

    addNum([1, 3, 5], 5);
  </script>
</html>
