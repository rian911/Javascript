<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>App</title>
  </head>
  <body>
    <button class="btn" onclick="iniTimeOut()">Click</button>
    <button class="add" onclick="displayMessage()">Add to chart</button>
    <button class="addM" onclick="displayMessage()">Add Message</button>
    <button class="removeM" onclick="displayMessage()">Remove Message</button>
    <p class="added"></p>
  </body>
  <script>
    // function are value

    const test = function () {
      console.log('hello');
    };

    console.log(test);
    test();

    function run(parameter) {
      parameter();
    }

    run(function () {
      console.log('hai 3');
    });

    setTimeout(function () {
      console.log('timeout');
    }, 3000);

    console.log('no wait');
    // diatas adalah contoh asyancrounos code
    // set time out tidak akan menghalangi console.log dijalankan
    // karena set timeout berjalan dibelakang layar

    setInterval(function () {
      console.log('interval');
    }, 3000);
    // interval sama dengan set timeout tapi dia akan mengulang funsi itu terus menerus

    // 12g
    let countM = 0;
    setInterval(function () {
      const changeTitle = document.querySelector('title');
      changeTitle.innerHTML = `(${countM++}) New message`;
    }, 3000);
    [
      // foreach sama seperti for loop
      // foreach ada fitur index dan value
      ('makan', 'mandi', 'tidur'),
    ].forEach(function (value, index) {
      if (value === 'mandi') {
        return;
        // return ini sama seperti continue di for loop
      }
      console.log(value, index);
    });

    // 12a
    const add = function () {
      console.log(2 + 3);
    };

    add();
    add();

    // 12b
    function runTwice(fun) {
      fun();
    }
    runTwice(function () {
      add();
      add();
    });

    // 12c
    function iniTimeOut() {
      setTimeout(function () {
        document.querySelector('button').innerHTML = 'berhasil';
      }, 1000);
      // 12d
      document.querySelector('button').innerHTML = 'Loading...';
    }

    // 12e
    // let istrue = false;
    // function removeText() {
    //   if (!istrue) {
    //     setTimeout(function () {
    //       document.querySelector('.added').innerHTML = '';
    //     }, 2000);
    //     document.querySelector('.added').innerHTML = 'Added';
    //   } else {
    //     clearTimeout();
    //     istrue = true;
    //   }
    // }

    let timeoutID;

    function displayMessage() {
      const messageElement = document.querySelector('.added');
      messageElement.innerHTML = 'Added';

      // first, cancel the previous time out
      // so it doesn't remove the message too quickly;

      clearTimeout(timeoutID);

      timeoutID = setTimeout(function () {
        messageElement.innerHTML = '';
      }, 2000);
    }
  </script>
</html>
